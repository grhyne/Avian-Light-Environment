---
title: "Avian Light Environment Code"
output: html_document
---


## Introduction

Install the packages needed, mainly 'tidyr' for easy coding

```{r}
library(tidyr)
```

Here we are going to import the raw light .csv data. INSERT FILE HERE

```{r}

rawData <- as.data.frame(read.csv("./Species_Data/HYMA_geo.csv", header=TRUE))

#Insert date banded and date recaptured in "YYYY-MM-DD" format
bandDate1 <- "2018-07-24"
recapDate1 <- "2019-06-03"

```

Now to format the data organization. Because date and time are compiled together, we want them to be separate columns. We also want to cut out the lag time before deployment, so you will have to input an exact banding time.

```{r}
sepRawData<-rawData %>%
tidyr::separate(DD.MM.YYYY.HH.MM.SS, into = c("date", "time"), sep = " ")
#Converting 'date' column as sequential dates, renaming light column
sepRawData$date <- as.Date(sepRawData$date, "%d/%m/%Y")

dateData <- sepRawData[(sepRawData$date >= bandDate1) & (sepRawData$date <= recapDate1) ,]

```


Remove all night-time light recordings (> 1.136 lumens)

```{r}
daylightData <- dplyr::filter(dateData, light.lux. > 1.136 & light.lux. < 1000)
  
```

Finalize our data to have daily mean, max, and min

```{r}
groupData <- daylightData %>% 
  dplyr::group_by(date)
finalData <- groupData %>%
  dplyr::summarise(mean = mean(light.lux.), max = max(light.lux.),min = min(light.lux.))

View(finalData)
```

Now we can plot the average light

```{r}
plot(finalData$date, finalData$mean,
     main = "Hylopezus macularius",
     ylab = "Daily mean light (lux)",
     xlab = "Month",
     type = "l")
```

